<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>VIRAAT - Military AI Assistant</title>
    <meta
      name="description"
      content="Advanced AI-powered query resolution system for military decision-making"
    />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
      rel="stylesheet"
    />

    <!-- Prism.js for code highlighting -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css"
      rel="stylesheet"
    />

    <!-- Styles -->
    <link rel="stylesheet" href="css/styles.css" />
    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/examples/js/controls/OrbitControls.js"></script>
  </head>
  <body>
    <!-- Authentication Modal -->
    <div id="authModal" class="modal active">
      <div class="modal-content auth-container">
        <div class="auth-header">
          <div class="logo-container">
            <div class="logo-icon">üõ°Ô∏è</div>
            <h1 class="logo-text">VIRAAT</h1>
          </div>
          <p class="tagline">Military AI Assistant</p>
        </div>

        <div class="auth-tabs">
          <button class="auth-tab active" data-tab="login">Sign In</button>
          <button class="auth-tab" data-tab="register">Register</button>
        </div>

        <!-- Login Form -->
        <form id="loginForm" class="auth-form active">
          <div class="form-group">
            <label for="loginUsername">Username</label>
            <input
              type="text"
              id="loginUsername"
              required
              placeholder="Enter your username"
            />
          </div>
          <div class="form-group">
            <label for="loginPassword">Password</label>
            <input
              type="password"
              id="loginPassword"
              required
              placeholder="Enter your password"
            />
          </div>
          <button type="submit" class="btn btn-primary">Sign In</button>
          
          <div class="auth-divider">
            <span>OR</span>
          </div>
          
          <button type="button" id="guestBtn" class="btn btn-secondary full-width">
            Continue as Guest
          </button>

          <p class="auth-hint">
            Demo: Use any credentials to register a new account
          </p>
        </form>

        <!-- Register Form -->
        <form id="registerForm" class="auth-form">
          <div class="form-group">
            <label for="registerUsername">Username</label>
            <input
              type="text"
              id="registerUsername"
              required
              placeholder="Choose a username"
            />
          </div>
          <div class="form-group">
            <label for="registerEmail">Email</label>
            <input
              type="email"
              id="registerEmail"
              required
              placeholder="your.email@domain.com"
            />
          </div>
          <div class="form-group">
            <label for="registerFullName">Full Name</label>
            <input
              type="text"
              id="registerFullName"
              placeholder="Your full name"
            />
          </div>
          <div class="form-group">
            <label for="registerPassword">Password</label>
            <input
              type="password"
              id="registerPassword"
              required
              placeholder="Create a password"
            />
          </div>
          <button type="submit" class="btn btn-primary">Create Account</button>
        </form>
      </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="hidden">
      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="sidebar-header">
          <div class="logo-small">
            <span class="logo-icon-small">üõ°Ô∏è</span>
            <span class="logo-text-small">VIRAAT</span>
          </div>
        </div>

        <div class="sidebar-content">
          <button id="newChatBtn" class="btn btn-new-chat">
            <span>+</span> New Conversation
          </button>

          <div class="conversations-list" id="conversationsList">
            <!-- Conversations will be loaded here -->
          </div>
        </div>

        <div class="sidebar-footer">
          <div class="user-info" id="userInfo">
            <div class="user-avatar"></div>
            <div class="user-details">
              <div class="user-name" id="userName">User</div>
              <div class="user-role" id="userRole">analyst</div>
            </div>
          </div>
          <button id="logoutBtn" class="btn-icon" title="Logout">üö™</button>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Header -->
        <header class="chat-header">
          <div class="header-left">
            <h2 id="currentConversationTitle">New Conversation</h2>
          </div>
          <div class="header-right">
            <button id="viewAnalyticsBtn" class="btn-secondary">
              üìä Analytics
            </button>
            <button
              id="ragToggleBtn"
              class="btn-toggle active"
              title="RAG Enabled"
            >
              <span class="toggle-indicator"></span>
              RAG
            </button>
            <button id="voiceToggleBtn" class="btn-toggle" title="Voice Input">
              üé§
            </button>
          </div>
        </header>

        <!-- Welcome Screen -->
        <div id="welcomeScreen" class="welcome-screen">
          <div class="welcome-content">
            <div class="welcome-icon">üõ°Ô∏è</div>
            <h1>Welcome to VIRAAT</h1>
            <p>Your Advanced Military AI Assistant</p>

            <div class="capabilities-grid">
              <div class="capability-card">
                <div class="capability-icon">üìö</div>
                <h3>Knowledge Base</h3>
                <p>Access military protocols and procedures</p>
              </div>
              <div class="capability-card">
                <div class="capability-icon">üí°</div>
                <h3>Decision Support</h3>
                <p>Strategic planning and analysis</p>
              </div>
              <div class="capability-card">
                <div class="capability-icon">üîí</div>
                <h3>Secure & Local</h3>
                <p>Runs entirely on your machine</p>
              </div>
              <div class="capability-card">
                <div class="capability-icon">‚ö°</div>
                <h3>Real-time Responses</h3>
                <p>Intelligent contextual answers</p>
              </div>
            </div>

            <div class="example-queries">
              <p class="example-title">Try asking:</p>
              <div
                class="example-query"
                data-query="What is the organizational structure of the Indian Army?"
              >
                "What is the organizational structure of the Indian Army?"
              </div>
              <div
                class="example-query"
                data-query="Explain the Military Decision-Making Process"
              >
                "Explain the Military Decision-Making Process"
              </div>
              <div
                class="example-query"
                data-query="What are the principles of secure military communications?"
              >
                "What are the principles of secure military communications?"
              </div>
            </div>
          </div>
        </div>

        <!-- Chat Container -->
        <div id="chatContainer" class="chat-container hidden">
          <div class="messages" id="messagesContainer">
            <!-- Messages will be loaded here -->
          </div>
        </div>

        <!-- Input Area -->
        <div class="input-area">
          <div class="input-wrapper">
            <textarea
              id="messageInput"
              placeholder="Ask anything about military operations, protocols, or strategic planning..."
              rows="1"
            ></textarea>
            <button id="sendBtn" class="btn-send" disabled>
              <span class="send-icon">‚û§</span>
            </button>
          </div>
          <div class="input-footer">
            <span class="model-info">Local LLM + RAG</span>
            <span class="disclaimer"
              >AI-generated responses ‚Ä¢ For informational purposes only</span
            >
          </div>
        </div>
          
        </div>
      </main>

      <!-- 3D Visualization Loop -->
      <aside id="visualContainer" class="visual-container hidden">
         <div class="visual-header">
            <h3>3D Tactical View</h3>
             <button id="closeVisualBtn" class="btn-icon">√ó</button>
         </div>
         <div id="canvas3d" class="canvas-3d"></div>
         <div class="visual-controls">
             <div class="control-group">
                 <button id="rotateBtn" class="btn-control active">Rotate</button>
                 <button id="wireframeBtn" class="btn-control">Wireframe</button>
             </div>
             <div id="modelLabel" class="model-label">System: Standby</div>
         </div>
      </aside>


      <!-- Analytics Modal -->
      <div id="analyticsModal" class="modal">
        <div class="modal-content analytics-container">
          <div class="modal-header">
            <h2>üìä Analytics Dashboard</h2>
            <button class="btn-close" id="closeAnalyticsBtn">√ó</button>
          </div>
          <div id="analyticsContent" class="analytics-content">
            <!-- Analytics will be loaded here -->
          </div>
        </div>
      </div>
    </div>

    <!-- Loading Indicator -->
    <div id="loadingIndicator" class="loading-overlay hidden">
      <div class="loading-spinner"></div>
      <p>Processing...</p>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/11.1.1/marked.min.js"></script>

    <script src="js/auth.js"></script>
    <script src="js/chat.js?v=2"></script>
    <script src="js/voice.js"></script>
    <script src="js/visualizer.js?v=2"></script>
    <script src="js/app.js"></script>
  </body>
</html>
